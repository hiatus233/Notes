# 游戏核心目标




**核心数值表**


### 桌游式低数值设计框架（基于您的设定优化）

#### **核心数值基准表**
第一章

| 项目       | 基准值 | 浮动范围 | 设计要点             |
| -------- | --- | ---- | ---------------- |
| 玩家初始血量   | 20  | ±0   | 每次升级+3           |
| 普通敌人血量   | 6-8 | ±1   | 精英+50%，BOSS+100% |
| 基础攻击卡伤害  | 4   | ±1   | 背击/地形加成时+2       |
| 基础防御卡护甲值 | 3   | ±1   | 护甲每回合重置          |
| 推动卡移动距离  | 2格  | ±0   | 撞击障碍伤害=移动剩余距离×1  |
| 特殊地形附加伤害 | 1-2 | -    | 火山/尖刺等危险地形       |
| 每回合基础行动点 | 3   | -    | 通过遗物/卡牌临时增加      |
|          |     |      |                  |

---

### 具体设计方案

#### **1. 攻防平衡体系**
```markdown
- 基础攻防比 = 攻击卡伤害(4) : 防御卡护甲(3) ≈ 1.33:1
- 击杀效率：普通敌人(6血)需要2次基础攻击 或 1次攻击+地形伤害
- 风险控制：玩家承受3次普通攻击即濒死（20/(6-3)=6.6次）
```

#### **2. 卡牌数值模板**
| 卡牌类型 | 名称     | 效果          | 行动消耗 | 特殊机制              |
| ---- | ------ | ----------- | ---- | ----------------- |
| 攻击卡  | 扳手猛击   | 造成4伤害       | 1    | 背击时+2伤害           |
| 攻击卡  | 高空坠物   | 对下层目标造成3伤害  | 1    | 可破坏目标地块           |
| 防御卡  | 临时护盾   | 获得3护甲       | 1    | 护甲存在时免疫击退         |
| 位移卡  | 液压推进   | 推动目标2格      | 1    | 撞击障碍时每剩余1格距离追加1伤害 |
| 战术卡  | 结构弱点分析 | 使目标下次受到伤害+2 | 1    | 对机械类敌人效果翻倍        |

#### **3. 敌人分级设计**
```markdown
| 敌人类型   | 血量 | 攻击 | 特性                  | 应对策略               |
|--------|----|----|---------------------|--------------------|
| 维修无人机  | 6  | 3  | 每回合修复1格最近地块         | 优先破坏其维修目标         |
| 失控叉车   | 8  | 4  | 撞击造成2格击退            | 利用地形制造碰撞          |
| 数据病毒   | 5  | 2  | 攻击附加"过载"(-1行动点/回合)  | 需要快速击杀避免DEBUFF叠加  |
| 精英-BOSS | 12 | 5  | 阶段转换时重塑战场地形         | 必须配合环境互动机制        |
```

#### **4. 地形联动机制**
```markdown
- 冰面滑行：移动结束后可消耗1行动点进行二次滑行（每滑行1格追加1伤害）
- 电缆漏电：对站在其上的单位每回合造成1伤害，推动撞击可破坏
- 货架坍塌：被破坏时对3x3区域造成2伤害
- 磁悬浮板：允许向任意方向推动，但撞击伤害×2
```

#### **5. 成长系统设计**
```markdown
- 卡牌升级：提升效果而非数值（如"扳手猛击"→增加背击范围）
- 遗物系统：
  - 绝缘手套：免疫电系地形伤害
  - 液压助力器：推动距离+1格 
  - 结构扫描仪：显示敌人弱点格
- 永久强化：
  - 最大行动点+1（需击败3个精英）
  - 基础护甲+1（需完成10次完美防御）
```

---

### 验证案例（战斗推演）
**场景**：玩家 vs 2个维修无人机(6血) + 1个失控叉车(8血)  
**玩家手牌**：扳手猛击×2、液压推进×1、临时护盾×1  

```markdown
回合1：
- 使用[液压推进]将叉车撞向货架（2格移动+2伤害）
- 货架坍塌对叉车造成2伤害 → 叉车剩余4血
- 使用[扳手猛击]背击无人机 → 4+2=6伤害（击毁）

回合2：
- 开启[临时护盾]抵挡叉车攻击
- 引导另一无人机撞击漏电电缆 → 3伤害+1电击=4伤害（击毁）
- 剩余行动点移动至安全位置

回合3：
- 破坏叉车所在磁悬浮板 → 造成2坠落伤害
- 补刀击毁残血叉车
```

---


# 玩家
## 角色
### 设计方向
**独特机制：**
每个角色具有独特机制，这个机制在多个维度体现，独特的系统/独特的遗物/独特的卡组。
PS:目前的一些设计方向：
```
角色设计方向：
1. 地形操控师
- 专长：地形创造和改变
- 独特机制：可以"种植"地形，比如创造冰墙、岩浆陷阱
- 卡牌特色：更多地形交互卡牌，地形combo
2. 立体战术家
- 专长：跨层战斗
- 独特机制：跨层攻击伤害+1，或者跨层移动不消耗能量
- 卡牌特色：大量跨层combo卡牌
3. 护甲专家
- 专长：防御和反击
- 独特机制：护甲可以叠加到下回合，或者护甲被攻击时反击
- 卡牌特色：护甲+攻击的combo卡牌
4. 区域控制者
- 专长：范围效果
- 独特机制：攻击范围天然+1，或者可以"占领"地块获得持续效果
- 卡牌特色：大范围攻击和控制类卡牌
5. 速度刺客
- 专长：高机动性
- 独特机制：每回合第一次移动不消耗能量，或者移动后攻击+1
- 卡牌特色：移动+攻击的combo卡牌
```

#### 地形操控师
从核心思路玩法出发，他现在有两种流派(初步构想)，分别是1.修改地形作为辅助手段，让每回合的决策变为我这回合需要修改出什么地形让我能够更好地用进攻牌来输出或者防御牌来防御2.让地形成为主要的攻击与防御手段手段，攻击性地形与辅助性地形成为主要的防守/进攻手段。(给我的感觉有点类似于塔防(?))
#### 遗物：
**“地形回响图腾”**（起始遗物）  
每回合，当你第一次**创造**或**破坏**地形时，获得 **1 点能量** 并 **抽 1 张牌**。



### 属性
血条上限，当前血量，行动值(能量)，力量(用于攻击增益，一点力量)，防御(护甲，能够增加临时的受击次数)，速度(目前没用，用于决定角色行动顺序)，攻击范围(用于展现每张牌的打出范围)，移动范围，金币(当前拥有的金币)。


## 抽卡

1. 游戏刚开始时，cardmanager首先将异步加载卡牌数据，NewGameLibrary中的卡组信息加入到现在的卡组中。
2. 游戏开始时，CardDeck将抽牌堆清空，然后遍历现在的卡组将其加入到抽牌堆中，最后执行洗牌操作。
3. 新回合开始时进行抽卡(从弃牌堆中抽取)。
## 弃牌
1. 在玩家回合结束时进行弃牌。
2. 遍历手牌，逐个加入弃牌堆，将实际的物体返回到对象池中，清空手牌并更新弃牌堆UI。
## 调整卡牌布局
1. 在抽牌和弃牌阶段过后，都需要调整卡牌布局，使得不同数量的卡牌在手牌中时都能够以合理的方式分布。
## 添加/删去卡牌
### 局内添加/删除卡牌
这种效果只需要修改**抽牌堆**和**弃牌堆**中的卡组信息即可达到对应的效果。
- 某些卡牌能够创建新的卡牌衍生物(单局对战内)
  ```ad-tip
  比如![[双持.png]]
  双持这种能够在一局对战中生成其他复制卡的卡
   ```
- 某些是单局内使用一定次数后消失的牌，比如杀戮尖塔中的**消耗**词条。

### 局外添加/删除卡牌
- 比如商店/篝火处的增删卡牌，亦或是考虑到局内达到某一条件永久获得/删去的卡牌。
这种需要更改currentCardLibrary来达到效果。
所以需要修改carddeck的逻辑让他在每次战斗结束后更新currentCardLibrary。(现在也只有单次战斗-.-)


PS:由于直接设计卡牌过于抽象，这里先构想几个流派来助于设计具体卡牌
[[卡牌配置表]]
### 流派

1. 过牌连击流（通过高频率的过牌并触发连击来击杀敌人并实现能量循环）——参考SL中的猎人谢幕流派
    
2. 陷阱流(在tile上设置陷阱，通过移动敌人的位置来触发陷阱)
    
3. DOT流派(参考SL中的猎人毒流)
    
4. 力量流派(参考SL中的力量战，通过叠加力量BUFF一刀999)
    
5. 召唤流(通过部署召唤物获得来攻击敌人并强化自身)
    
6. 层差打击流(通过在不同层之间的高低打击收益击败敌人)
    
7. 地形交互流(通过破坏或改造地形获取收益来击败敌人)
    
8. 随机流(卡牌带有强随机性，用随机卡牌来击败敌人)
    
9. 背刺流(通过面朝方向的不同给予敌人额外伤害)


# 商店系统
## 商品
从[卡牌](obsidian://open?vault=Obsidian%20Vault&file=game%2F%E5%8D%A1%E7%89%8C)、[遗物](obsidian://open?vault=Obsidian%20Vault&file=game%2F%E9%81%97%E7%89%A9)和药水中选取对应的商品，商品对应的csv文件摘取的是卡牌和遗物csv文件的部分字段。如下表
也就是说实际需要我们填写的不重复数据其实只有商品价格这一栏。

| 商品名称 | 商品类型 | 商品描述 | 商品价格 | 商品地址(在addressables下的地址 |
| ---- | ---- | ---- | ---- | ---------------------- |
|      |      |      |      |                        |
|      |      |      |      |                        |





# 敌人

## 敌人攻击
每个敌人的攻击会有~~**蓄力倒计时**~~，当计时器到达0时敌人会在该回合进行攻击。
## 敌人类型
敌人分为不同类型，每种类型的敌人展现的意图不同，蓄力计时器也不同

### 1. “猛扑蛛” (Pouncing Spider) - 近战威胁

- **核心概念**：一个快速、脆弱的骚扰单位，它的存在迫使玩家时刻注意自己的站位，不能在任何敌人身边停留。
    
- **意图：猛扑 (Pounce)**
    
    - **蓄力回合**: **1 回合**。它的威胁是即时的，玩家需要在当前回合就做出应对。
        
    - **跨层攻击?**: **否**。它的威胁完全来自于和它在同一平面的敌人。
        
- **行为描述**:
    
    1. **AI决策**: 在它的回合，它会寻找离它最近的玩家。然后，它会计算出一条能移动到该玩家**相邻格子**的最短路径。
        
    2. **意图预告**: 玩家会看到一条指向目标玩家邻近格子的移动路径，并且在那个最终落点的**上下左右四个格子**，会显示红色的“利爪”攻击范围高亮。
        
    3. **实际行动**: 蓄力结束后，它会移动到预告的位置，然后对四个高亮格子中的一个（优先选择有玩家的那个）进行攻击。
        
- **策略要点**:
    
    - 对玩家来说，这是一个“不要站我身边”的明确信号。
        
    - 它的挑战在于，当有其他敌人（比如远程攻击）迫使您移动到某个位置时，您必须同时考虑这个新位置是否会进入“猛扑蛛”的攻击范围。
        

---

### 2. “爆破甲虫” (Demolition Beetle) - 直线破坏者

- **核心概念**：一个行动缓慢、可预测但极具破坏力的“攻城槌”。它的主要目标不是杀伤单位，而是**重塑战场，破坏地形**。
    
- **意图：野蛮冲撞 (Savage Charge)**
    
    - **蓄力回合**: **2 回合**。这给了玩家一个完整的准备回合，来应对这个巨大的威胁。
        
    - **跨层攻击?**: **否**。它的冲撞是纯粹的平面物理行为。
        
- **行为描述**:
    
    1. **AI决策**: 它会扫描战场，寻找一条能**同时对齐自己和一名玩家**的直线（横向或纵向）。它会优先选择那条能破坏最多脆弱地块，或者能将玩家撞向危险区域（如悬崖、其他敌人攻击范围）的路线。
        
    2. **意图预告**: 玩家会看到一条长长的、贯穿数个格子的红色高亮直线，从甲虫当前位置一直延伸到它计划撞击的最终目标。
        
    3. **实际行动**: 蓄力结束后，它会沿着这条直线冲锋。
        
        - 对**路径上经过的所有地块**都造成1点耐久度伤害。
            
        - 对最终撞上的**第一个单位或障碍物**造成一次巨大的伤害。
            
- **策略要点**:
    
    - 这是一个经典的《陷阵之志》式谜题。玩家的核心目标是“让这次冲撞失效”。
        
    - 解决方案是多样的：是移动自己的单位躲开？还是用位移技能把甲虫推歪？或者是更聪明的，把另一个敌人推到甲虫的冲撞路径上，让它们“自相残杀”？
        

---

### 3. “迫击炮台” (Mortar Turret) - 立体空间威胁

- **核心概念**：一个固定的、高威胁的远程单位，它的存在是为了**惩罚**那些只顾眼前、不考虑垂直维度的玩家。
    
- **意图：熔岩炮弹 (Lava Mortar)**
    
    - **蓄力回合**: **2 回合**。它的高威胁性决定了它需要足够长的预告时间。
        
    - **跨层攻击?**: **是！** 这是它设计的核心价值。
        
- **行为描述**:
    
    1. **AI决策**: 它本身不会移动。它会扫描**比它低的楼层**，寻找玩家单位最密集，或者地形最脆弱的区域。
        
    2. **意图预告**: 玩家会看到，在**下层**的一个地块上出现一个红色的准星，并在其周围3x3的范围内显示爆炸高亮。一个在第3层的玩家，可能会看到第1层的地面上出现了攻击预告。
        
    3. **实际行动**: 蓄力结束后，它会“发射”炮弹，对预告区域内的所有单位和地块造成伤害和破坏。
        
- **策略要点**:
    
    - 它强迫玩家进行**三维思考**。玩家不能再认为高层是绝对安全的。
        
    - 它创造了两难：我是应该派一个单位上楼去解决这个炮台（但可能会因此暴露在其他敌人的攻击下），还是在下面疲于奔命地躲避炮击？
        

---

### 4. “酸液喷吐者” (Acid Spitter) - 区域控制者

- **核心概念**：一个不直接造成伤害，但能创造**持续性危险区域**的辅助型敌人。它的目标是压缩玩家的安全活动空间。
    
- **意图：腐蚀酸液 (Corrosive Acid)**
    
    - **蓄力回合**: **1 回合**。它的威胁不是即死的，所以预告时间可以短一些。
        
    - **跨层攻击?**: **可以（可选）**。它可以设计为只会影响当前层，也可以设计为“酸液滴漏”，同时影响正下方的地块。
        
- **行为描述**:
    
    1. **AI决策**: 它会优先选择玩家脚下的地块。如果够不着，它会选择一个玩家在下一回合很可能会经过的战略要地（比如一个狭窄的通道）。
        
    2. **意图预告**: 玩家会看到一个目标地块上出现绿色的、冒泡的范围高亮。
        
    3. **实际行动**: 蓄力结束后，它会对目标地块“喷吐”。
        
        - 不对任何单位造成直接伤害。
            
        - 对地块造成1点耐久度伤害。
            
        - 将地块转换为“酸液池”，任何单位在回合结束时停留在上面都会受到伤害。
            
- **策略要点**:
    
    - 它让战场变得“动态”。安全的区域会逐渐变成危险区。
        
    - 玩家需要不断地移动，无法在一个地方安逸地防守。
        
    - 玩家甚至可以利用它：引诱它向某个方向喷吐，从而用酸液池去伤害其他敌人。

### **敌人类型行为表（完善版）**


| 敌人名  | 敌人意图 | 详细解释                            | 蓄力回合 |     |
| ---- | ---- | ------------------------------- | ---- | --- |
| 小史莱姆 | 冲撞   | 向前方直线四格内冲刺，对第一个碰撞到的单位造成6点伤害     | 1    |     |
|      | 随机移动 |                                 | 1    |     |
|      | 分泌粘液 | 向周围的九宫格释放粘液，对单位添加虚弱(叠加的防御减少50%) | 2    |     |
|      |      |                                 |      |     |
|      |      |                                 |      |     |
|      |      |                                 |      |     |
|      |      |                                 |      |     |
|      |      |                                 |      |     |
|      |      |                                 |      |     |
|      |      |                                 |      |     |
|      |      |                                 |      |     |
|      |      |                                 |      |     |
|      |      |                                 |      |     |



| 类型          | 特点          | 可能采取的行动（与摧毁度/多层机制联动）                                                                                                                       | 蓄力回合 | 对策提示                    |
| ----------- | ----------- | ------------------------------------------------------------------------------------------------------------------------------------------ | ---- | ----------------------- |
| **战士（追击者）** | 高机动性，持续压迫玩家 | 1. **撕裂挥砍**：3x3范围攻击，命中地块摧毁度+25%  <br>2. **死亡坠落**：若玩家在下层，蓄力后跳向下层对4格造成伤害并追加50%摧毁度  <br>3. **酸性冲锋**：直线5格冲锋，对首个目标造成伤害，路径地块进入“腐蚀状态”（下回合摧毁度+30%） | 1-2  | 用击退卡诱导其坠入高摧毁度区域         |
| **狙击者**     | 超远距离精确打击    | 1. **弱点锁定**：标记玩家当前位置，下回合发射穿透弹（贯穿上下层，对路径所有单位造成伤害）  <br>2. **侦察无人机**：召唤无人机持续暴露玩家位置，无人机被击落前狙击伤害翻倍  <br>3. **战术后撤**：攻击后向反方向移动3格，保持距离           | 3    | 使用“电子干扰”卡屏蔽标记，或快速贴近打断蓄力 |
| **爆发者**     | 蓄力后高范围伤害    | 1. **岩浆喷发**：选定3x3区域，蓄力完成后造成伤害并永久转化为岩浆地块（触碰即死）  <br>2. **连锁爆破**：引爆炸弹，对周围8格追加等同于地块当前摧毁度的伤害  <br>3. **过载自毁**：蓄力失败时自爆，对全场追加10%摧毁度              | 2    | 用位移卡将其推入岩浆区或提前打断        |
| **阻碍者**     | 地形改造大师      | 1. **凝胶牢笼**：生成不可通行的凝胶墙（需特定“溶解”卡清除）  <br>2. **重力陷阱**：使目标地块进入“超重状态”，玩家经过时消耗双倍移动力  <br>3. **空间折叠**：交换上下层对应位置的地块状态（如将下层毒气复制到上层）                | 2    | 携带“地形净化”卡，或利用折叠机制反制敌人   |
| **念力者**     | 操控单位位置，打乱阵型 | 1. **引力漩涡**：强制拉拽玩家至念力者相邻格，并封锁位移卡1回合  <br>2. **位置交换**：与玩家互换位置，若玩家位于下层则追加坠落伤害  <br>3. **混乱力场**：随机翻转4x4区域内所有单位的移动方向（玩家↑变↓，敌人左变右）              | 2    | 使用“反重力锚”卡免疫操控，或优先集火击杀   |

| 类型      | 特点         | 会采取的行动                       | 蓄力回合 |
| ------- | ---------- | ---------------------------- | ---- |
| 战士(追击者) | 持续接近玩家并攻击  | 进行周边区域3x3的攻击                 | 1    |
|         |            | 冲锋，对一条直线上的碰撞到的第一个实体/建筑造成伤害   | 2    |
|         |            | 如果玩家在下层，会坠落到下一层对周边四格造成破坏     | 2    |
| 狙击者     | 保持距离并远距离攻击 | 对玩家当前位置的十字格锁定，下回合造成伤害(贯穿上下层) | 2    |
|         |            | 朝一条直线上的玩家攻击，后朝反方向移动三格        | 1    |
|         |            |                              |      |
| 爆发者     | 蓄力后范围攻击    |                              | 2    |
| 阻碍者     | 制造地形以阻碍玩家  | 制造陷阱类型的地块，当有实体移动到该地块上会收到伤害   | 2    |
|         |            |                              |      |
| 念力者     | 移动玩家位置     | 将玩家拖拽到念力者相邻格                 | 1    |
|         |            | 与玩家互换位置，如果玩家在上层则追加坠落伤害       |      |
|         |            |                              |      |


### 美术设计


# 地形
- 地形是在地砖和瓦片上的进一步延伸，视觉效果上位于地砖和瓦片上
- 参考图：  
- 地形意为游戏增加更多的策略维度，比如玩家可以使用移动类型的卡牌移动自身或敌人，使得对应实体移动到相应地形上产生相应效果。
- 初步设计如下：

# 房间
## 战斗房
战斗房间分为普通房，精英房以及Boss房间‘
对于普通房和精英房来说需要有一些敌人范式的搭配，可以用Config(SO)文件进行配置，比如普通房敌人一 x2+敌人二 x3
Boss方则需要设计boss独特的行为机制
## 休息房
休息房间初始有3点行动次数，每一次行动能选择一种增益。
提供[[#医疗|医疗]](恢复当前血量)，[[#锻造|锻造]]（升级卡牌），[[#健身|健身]]（提高最大生命值）（每层有次数限制），[[#喝下午茶|喝下午茶]](为下一次战斗开始提供几回合的额外能量)。
### 医疗
为玩家回复30%的最大生命值，可被遗物增加至45%
### 锻造
可以升级卡牌，提升卡牌额外基础数值/作用数量/作用范围。
### 健身
提高玩家的最大生命值（每次5点），每章存在次数上限
### 喝下午茶
为下一场战斗的前两个回合提供额外的1点能量。
## 宝箱房
宝箱房能够开启一个宝箱，其中会随机出现一个遗物和一瓶药水和一定量的金币。
也可以选择开启诅咒宝箱（内含强大的诅咒遗物），代价根据随机出的诅咒遗物进行选择。
1.下场战斗的最大能量值-1。
2.失去当前50%的血量
3.下场战斗的敌人血量增加50%。
4.每摧毁一个地块损失2点生命值
5.xx类卡牌能耗+1（持续一场战斗）
6.等等

## 商人房
在商人房可以购买商品（包括卡牌，遗物和药水），初步的UI面板如下：
![[商店初步UI面板图.png]]

## 随机事件房
随机事件房会有很多种，通过随机事件玩家会获得资源或失去资源。
### UI呈现
在UI呈现上，参考杀戮尖塔以及众多其他肉鸽游戏的事件设计。在点击房间后，弹出UI框以及一些描述的文字，给予x个选项来对应不同的应对结果（第一次触发该事件时不会标注出最终事件结果）。

### 配置表

| ID字段（唯一GUID，untiy生成） | 事件名称（Name字段） | 应对选项 | 后续结果 |     |
| -------------------- | ------------ | ---- | ---- | --- |
|                      |              |      |      |     |
|                      |              |      |      |     |
|                      |              |      |      |     |




# 关键词词条显示&意图显示系统
## 关键词词条显示系统
在各种物品的描述词条中，有**关键词条**出现时，用额外的面板对**关键词条**进行描述。E.G.：
选中并点击单位显示单位的移动范围，悬停在单位上显示意图，显示额外描边，左侧显示敌人右侧显示地块信息。鼠标移动到左侧敌人头像框后会显示敌人的具体信息

![[file-20250421174658734.png]]![[file-20250421202613818.png]]
发生碰撞时的图标参考
![[file-20250708153117693.png]]

## 意图显示系统
意图显示系统是玩家获取敌人会怎么做的直接途径，通过鼠标悬停显示敌人的预攻击区域，预移动路径。

# 回合行动顺序显示
当玩家鼠标悬停在该按钮上时，能够在UI上显示敌人的行动顺序
![[file-20250529145556559.png]]


# 增益系统

这里叫增益系统而不是buff系统主要是考虑到在roguelike游戏中存在的四种主要增益（以作用时间区分）
1. **跨局永久升级 (Meta Progression / Permanent Upgrades)：**
    
    - **范围：** 跨越**所有**后续游戏。
        
    - **特点：** 死亡或通关后不会消失，解锁新内容或提供基础强化。
        
    - **例子：** 《杀戮尖塔》中解锁新卡牌、新遗物、新角色；《哈迪斯》中镜之能力升级、解锁武器形态。
        
2. **局内永久成长 (Run-Long Permanent Growth)：**
    
    - **范围：** 持续整个**单次游戏进程（单局/单轮）**，直到该局游戏结束（死亡或通关）。
        
    - **特点：** 在**当前这一局游戏**内获得后，效果会**一直存在**，影响该局内**所有**后续战斗和事件。死亡或通关后重置。
        
    - **核心区别：** 区别于“战斗内永久Buff”，它在**战斗之间**依然持续有效。
        
    - **例子：**
        
        - **最大生命值提升：** 通过遗物（如“草莓”、“桃子”）、事件（如“知了空壳”、“黄金神像”选代价）、药水（如“神圣药水”）或卡牌（如“喂食”成功）获得的**最大生命值增加**。这在整个单局游戏中都有效。
            
        - **基础属性永久改变：** 某些遗物或事件永久改变角色的基础属性（虽然《尖塔》较少见，但在其他肉鸽中常见，如获得永久+1攻击力）。
            
        - **关键遗物的效果：** 如获得“咖啡滤杯”，其“每回合额外抽1张牌”的效果在该局游戏中始终存在。
            
        - **事件效果：** 如“古事件”选择获得“黄金”，其“每场战斗开始时获得25金币”的效果在该局剩余游戏中持续。
            
3. **战斗内永久性 Buff (Combat-Long Permanent Buffs)：**
    
    - **范围：** 仅持续**单场战斗**。
        
    - **特点：** 一旦在**某场战斗中获得**，其效果会**稳定持续到该场战斗结束**，不会随时间或回合自动消失（除非被特定效果移除或覆盖）。
        
    - **例子：** “力量”（Strength - 每点增加攻击卡伤害1点）、“敏捷”（Dexterity - 每点增加格挡卡格挡值1点）、“集中”（Focus - 每点增加充能球效果）、“人工制品”（Artifact - 抵消下一个施加的Debuff）的层数（只要不被消耗）。这些层数在该场战斗中会一直存在并生效。
        
4. **暂时性 Buff/Debuff (Temporary Buffs/Debuffs)：**
    
    - **范围：** 仅持续**单场战斗**中的**有限回合数**。
        
    - **特点：** 有明确的**回合计数器**，效果会在回合结束时递减计数，计数归零后自动消失。也可能被特定效果移除。
        
    - **例子：**
        
        - **Debuff:** “虚弱”（Weak - 攻击造成的伤害减少25%）、“易伤”（Vulnerable - 受到的攻击伤害增加50%）、“中毒”（Poison - 回合结束时受到伤害）、“缓速”（Slow - 下回合抽牌减少）。
            
        - **Buff:** “活力”（Vigor - 下张攻击牌伤害增加X）、“下回合格挡保留”（如“金属化”遗物给的保留格挡）、“下次抽牌+1”（如“预见”效果）。这些通常都有明确的回合数限制（通常是1回合，或直到被消耗）。
Buff的作用范围持续整场战斗，但是在战斗结束后消失。
以下是当前buff的设计
```
public Stats attributeName;  
public int value;  
public float duration;//用于临时buff（）  
public Operation Operator;  
public bool isActive;//目前是否有效（用于表示永久型buff是否已经作用）  
public string statModName;  
public BuffType bufftype;  
public int stacks = 1; // 层数(用于永久buff)  
public int maxStacks = 99; // 最大层数
```


| Buff名称 | Buff类型     | Buff效果                                |     |
| ------ | ---------- | ------------------------------------- | --- |
| 力量     | 战斗内永久性buff | 增加x点攻击次数(x为该buff的层数)                  |     |
| 敏捷     | 战斗内永久性buff | 增加x点闪避(x为该buff的层数)                    |     |
| 闪避     | 战斗内暂时性buff | 躲避掉x次敌人的攻击(x为该buff的层数)                |     |
| 下午茶    | 暂时性buff    | 获得x点额外能量(x为value)，持续y回合(y为该buff的持续时间) |     |
| 易伤     | 暂时性debuff  | 受到攻击时额外遭受x点攻击次数(x为该buff的层数)           |     |
| 虚弱     | 暂时性debuff  | 移动时减少x点(x为该buff的层数)                   |     |
| 燃烧     | 暂时性debuff  | 接下来x回合内在回合开始时受击一次(x为该buff的层数)         |     |
|        |            |                                       |     |
|        |            |                                       |     |









# UI设计

目前战斗房间内的UI设计的过于繁荣复杂，我想要重构优化一下UI的显示，目前UI：
![[file-20250623165802350.png]]
![[file-20251003150854165.png]]

预期战斗房UI：
![[Drawing 2025-06-23 21.37.54.excalidraw]]

![[file-20250701151011653.png]]


能量条设计
![[PixPin_2025-06-24_15-10-39.mp4]]

或许的商店界面

![[file-20250919162355581.png]]