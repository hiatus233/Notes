# 卡牌系统
## 抽卡

1. 游戏刚开始时，cardmanager首先将异步加载卡牌数据，NewGameLibrary中的卡组信息加入到现在的卡组中。
2. 游戏开始时，CardDeck将抽牌堆清空，然后遍历现在的卡组将其加入到抽牌堆中，最后执行洗牌操作。
3. 新回合开始时进行抽卡(从弃牌堆中抽取)。




## 弃牌
1. 在玩家回合结束时进行弃牌。
2. 遍历手牌，逐个加入弃牌堆，将实际的物体返回到对象池中，清空手牌并更新弃牌堆UI。


## 调整卡牌布局
1. 在抽牌和弃牌阶段过后，都需要调整卡牌布局，使得不同数量的卡牌在手牌中时都能够以合理的方式分布。

## 添加/删去卡牌
### 局内添加/删除卡牌
这种效果只需要修改**抽牌堆**和**弃牌堆**中的卡组信息即可达到对应的效果。
- 某些卡牌能够创建新的卡牌衍生物(单局对战内)
  ```ad-tip
  比如![[file-20250120223714071.png]]
  双持这种能够在一局对战中生成其他复制卡的卡
   ```
- 某些是单局内使用一定次数后消失的牌，比如杀戮尖塔中的**消耗**词条。

### 局外添加/删除卡牌
- 比如商店/篝火处的增删卡牌，亦或是考虑到局内达到某一条件永久获得/删去的卡牌。
这种需要更改currentCardLibrary来达到效果。
所以需要修改carddeck的逻辑让他在每次战斗结束后更新currentCardLibrary。(现在也只有单次战斗-.-)


# 商店系统

## 商品
从[卡牌](obsidian://open?vault=Obsidian%20Vault&file=game%2F%E5%8D%A1%E7%89%8C)、[遗物](obsidian://open?vault=Obsidian%20Vault&file=game%2F%E9%81%97%E7%89%A9)和药水中选取对应的商品，商品对应的csv文件摘取的是卡牌和遗物csv文件的部分字段。如下表
也就是说实际需要我们填写的不重复数据其实只有商品价格这一栏。

| 商品名称 | 商品类型 | 商品描述 | 商品价格 | 商品地址(在addressables下的地址 |
| ---- | ---- | ---- | ---- | ---------------------- |
|      |      |      |      |                        |
|      |      |      |      |                        |



